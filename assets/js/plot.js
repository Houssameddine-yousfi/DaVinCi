Highcharts.chart('pie_chart_total', {
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie',
        height: document.getElementsByClassName("bot-left")[0].offsetHeight
    },
    title: {
        text: 'Part de marché du tourisme en 2018'
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
    },
    accessibility: {
        point: {
            valueSuffix: '%'
        }
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
                enabled: true,
                format: '<b>{point.name}</b>: {point.percentage:.1f} %'
            }
        }
    },
    
    series: [{
        name: 'Brands',
        colorByPoint: true,
        data: [
        {
            name: 'Hérault',
            y: 49765810,
            sliced: true,
            selected: true
        },
        {
            name: 'Pyrénées-Orientales',
            y: 31798447
        },
        {
            name: 'Haute-Garonne',
            y: 28612739
        },
        {
            name: 'Gard',
            y: 21380521
        },
        {
            name: 'Aude',
            y: 16150703
        },
        {
            name: 'Hautes-Pyrénées',
            y: 10962970
        },
        {
            name: 'Aveyron',
            y: 7944721
        },
        {
            name: 'Lot',
            y: 7879581
        },
        {
            name: 'Tarn',
            y: 6337459
        },
        {
            name: 'Tarn-et-Garonne',
            y: 6029670
        },
        {
            name: 'Gers',
            y: 5696542
        },
        {
            name: 'Ariège',
            y: 4675476,
        }]
    }]
});


var seriesOptions = [],
    seriesCounter = 0,
    datasets = ["dpt_09", "dpt_11", "dpt_12","dpt_30", "dpt_31", "dpt_32", "dpt_34","dpt_46","dpt_48","dpt_65","dpt_66","dpt_81","dpt_32"],
    names = ["dpt_09", "dpt_11", "dpt_12","dpt_30", "dpt_31", "dpt_32", "dpt_34","dpt_46","dpt_48","dpt_65","dpt_66","dpt_81","dpt_32"];

/**
 * Create the chart when all data is loaded
 * @returns {undefined}
 */
function createChart() {

    Highcharts.stockChart('container', {
        chart: {
            height: document.getElementsByClassName("top-left")[0].offsetHeight
        },
        title: {
            text: 'Nombre de nuitées par jour pour chaque departement'
        },
        rangeSelector: {
            selected: 4
        },

        yAxis: {
            labels: {
                formatter: function () {
                    return (this.value > 0 ? ' + ' : '') + this.value + '%';
                }
            },
            plotLines: [{
                value: 0,
                width: 2,
                color: 'silver'
            }]
        },

        plotOptions: {
            series: {
                compare: 'percent',
                showInNavigator: true
            }
        },

        tooltip: {
            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
            valueDecimals: 2,
            split: true
        },

        series: seriesOptions
    });
}

function success(data) {

    var name = this.url.match(/(dpt_09|dpt_11|dpt_12|dpt_30|dpt_31|dpt_32|dpt_34|dpt_46|dpt_48|dpt_65|dpt_66|dpt_81|dpt_32)/)[0];
    var i = names.indexOf(name);
    seriesOptions[i] = {
        name: name,
        data: data
    };

    // As we're loading the data asynchronously, we don't know what order it
    // will arrive. So we keep a counter and create the chart when all the data is loaded.
    seriesCounter += 1;

    if (seriesCounter === names.length) {
        createChart();
    }
}

datasets.forEach(serie => {
    Highcharts.getJSON(
        'assets/data/' + serie + '.json',
        success
    );
});

Highcharts.chart('sankey', {
    chart: {
        height: document.getElementsByClassName("page2__right")[0].offsetHeight
    },
    title: {
        text: 'Highcharts Sankey Diagram'
    },
    accessibility: {
        point: {
            valueDescriptionFormat: '{index}. {point.from} to {point.to}, {point.weight}.'
        }
    },
    series: [{
        keys: ['from', 'to', 'weight'],
        data: [
            ['Autres', 'Hérault (34)', 4376348],
            ['Autres', 'Haute-Garonne (31)', 7403741],
            ['Autres', 'Pyrénées-Orientales (66)', 2907786],
            ['Autres', 'Gard (30)', 2138859],
            ['Autres', 'Aude (11)', 1144845],
            ['Autres', 'Hautes-Pyrénées (65)', 445319],
            ['Autres', 'Tarn-et-Garonne (82)', 1266697],
            ['Autres', 'Lot (46)', 378165],
            ['Autres', 'Gers (32)', 719620],
            ['Autres', 'Tarn (81)', 645479],
            ['Autres', 'Aveyron (12)', 396124],
            ['Autres', 'Ariège (9)', 269860],
            ['Autres', 'Lozère (48)', 135852],
            ['DE', 'Hérault (34)', 3618779],
            ['DE', 'Haute-Garonne (31)', 1788857],
            ['DE', 'Pyrénées-Orientales (66)', 1581486],
            ['DE', 'Gard (30)', 1693882],
            ['DE', 'Aude (11)', 1286481],
            ['DE', 'Hautes-Pyrénées (65)', 308810],
            ['DE', 'Tarn-et-Garonne (82)', 295953],
            ['DE', 'Lot (46)', 274911],
            ['DE', 'Gers (32)', 258318],
            ['DE', 'Tarn (81)', 314063],
            ['DE', 'Aveyron (12)', 347250],
            ['DE', 'Ariège (9)', 160880],
            ['DE', 'Lozère (48)', 191806],
            ['GB', 'Hérault (34)', 2045869],
            ['GB', 'Haute-Garonne (31)', 1062427],
            ['GB', 'Pyrénées-Orientales (66)', 1066328],
            ['GB', 'Gard (30)', 701503],
            ['GB', 'Aude (11)', 2435889],
            ['GB', 'Hautes-Pyrénées (65)', 740108],
            ['GB', 'Tarn-et-Garonne (82)', 402911],
            ['GB', 'Lot (46)', 602442],
            ['GB', 'Gers (32)', 494758],
            ['GB', 'Tarn (81)', 388607],
            ['GB', 'Aveyron (12)', 274035],
            ['GB', 'Ariège (9)', 259258],
            ['GB', 'Lozère (48)', 49661],
            ['ES+PT', 'Hérault (34)', 1678526],
            ['ES+PT', 'Haute-Garonne (31)', 1498500],
            ['ES+PT', 'Pyrénées-Orientales (66)', 3012094],
            ['ES+PT', 'Gard (30)', 783003],
            ['ES+PT', 'Aude (11)', 1007522],
            ['ES+PT', 'Hautes-Pyrénées (65)', 911256],
            ['ES+PT', 'Tarn-et-Garonne (82)', 263669],
            ['ES+PT', 'Lot (46)', 207470],
            ['ES+PT', 'Gers (32)', 167166],
            ['ES+PT', 'Tarn (81)', 246147],
            ['ES+PT', 'Aveyron (12)', 199069],
            ['ES+PT', 'Ariège (9)', 240661],
            ['ES+PT', 'Lozère (48)', 79722],
            ['BE+LU', 'Hérault (34)', 2321784],
            ['BE+LU', 'Haute-Garonne (31)', 904397],
            ['BE+LU', 'Pyrénées-Orientales (66)', 1018745],
            ['BE+LU', 'Gard (30)', 1483686],
            ['BE+LU', 'Aude (11)', 682324],
            ['BE+LU', 'Hautes-Pyrénées (65)', 203332],
            ['BE+LU', 'Tarn-et-Garonne (82)', 270266],
            ['BE+LU', 'Lot (46)', 468649],
            ['BE+LU', 'Gers (32)', 238078],
            ['BE+LU', 'Tarn (81)', 232893],
            ['BE+LU', 'Aveyron (12)', 261652],
            ['BE+LU', 'Ariège (9)', 150641],
            ['BE+LU', 'Lozère (48)', 102906],
            ['NL', 'Hérault (34)', 1876396],
            ['NL', 'Haute-Garonne (31)', 653372],
            ['NL', 'Pyrénées-Orientales (66)', 913267],
            ['NL', 'Gard (30)', 1073617],
            ['NL', 'Aude (11)', 474797],
            ['NL', 'Hautes-Pyrénées (65)', 261919],
            ['NL', 'Tarn-et-Garonne (82)', 331902],
            ['NL', 'Lot (46)', 492948],
            ['NL', 'Gers (32)', 406091],
            ['NL', 'Tarn (81)', 220515],
            ['NL', 'Aveyron (12)', 462217],
            ['NL', 'Ariège (9)', 241410],
            ['NL', 'Lozère (48)', 172943],
            ['DK+SE+NO', 'Hérault (34)', 1284505],
            ['DK+SE+NO', 'Haute-Garonne (31)', 756032],
            ['DK+SE+NO', 'Pyrénées-Orientales (66)', 626705],
            ['DK+SE+NO', 'Gard (30)', 603428],
            ['DK+SE+NO', 'Aude (11)', 406873],
            ['DK+SE+NO', 'Hautes-Pyrénées (65)', 73501],
            ['DK+SE+NO', 'Tarn-et-Garonne (82)', 206483],
            ['DK+SE+NO', 'Lot (46)', 121570],
            ['DK+SE+NO', 'Gers (32)', 131431],
            ['DK+SE+NO', 'Tarn (81)', 207166],
            ['DK+SE+NO', 'Aveyron (12)', 244055],
            ['DK+SE+NO', 'Ariège (9)', 60832],
            ['DK+SE+NO', 'Lozère (48)', 62672],
            ['IT', 'Hérault (34)', 787914],
            ['IT', 'Haute-Garonne (31)', 548492],
            ['IT', 'Pyrénées-Orientales (66)', 220090],
            ['IT', 'Gard (30)', 345527],
            ['IT', 'Aude (11)', 191380],
            ['IT', 'Hautes-Pyrénées (65)', 762090],
            ['IT', 'Tarn-et-Garonne (82)', 96028],
            ['IT', 'Lot (46)', 53061],
            ['IT', 'Gers (32)', 70793],
            ['IT', 'Tarn (81)', 111202],
            ['IT', 'Aveyron (12)', 103189],
            ['IT', 'Ariège (9)', 33013],
            ['IT', 'Lozère (48)', 30118],
            ['CH', 'Hérault (34)', 774790],
            ['CH', 'Haute-Garonne (31)', 228112],
            ['CH', 'Pyrénées-Orientales (66)', 247969],
            ['CH', 'Gard (30)', 591878],
            ['CH', 'Aude (11)', 185275],
            ['CH', 'Hautes-Pyrénées (65)', 73822],
            ['CH', 'Tarn-et-Garonne (82)', 37802],
            ['CH', 'Lot (46)', 43229],
            ['CH', 'Gers (32)', 31587],
            ['CH', 'Tarn (81)', 52843],
            ['CH', 'Aveyron (12)', 45284],
            ['CH', 'Ariège (9)', 27403],
            ['CH', 'Lozère (48)', 27624],
            ['US', 'Hérault (34)', 261557],
            ['US', 'Haute-Garonne (31)', 312803],
            ['US', 'Pyrénées-Orientales (66)', 141524],
            ['US', 'Gard (30)', 222734],
            ['US', 'Aude (11)', 132644],
            ['US', 'Hautes-Pyrénées (65)', 80960],
            ['US', 'Tarn-et-Garonne (82)', 33509],
            ['US', 'Lot (46)', 43387],
            ['US', 'Gers (32)', 41977],
            ['US', 'Tarn (81)', 55709],
            ['US', 'Aveyron (12)', 31822],
            ['US', 'Ariège (9)', 22956],
            ['US', 'Lozère (48)', 14305]
        ],
        type: 'sankey',
        name: 'Sankey demo series'
    }]

});

//==============================================the map


Highcharts.getJSON('assets/data/org_volume.json', function (data) {

    // Make codes uppercase to match the map data
    // data.forEach(function (p) {
    //     p.code = p.code.toUpperCase();
    // });

    // Instantiate the map
    Highcharts.mapChart('map_france', {
       
        chart: {
            height: document.getElementsByClassName("page2__right")[0].offsetHeight,

            map: 'countries/us/us-all',
            borderWidth: 1
        },

        title: {
            text: 'US population density (/km²)'
        },

        exporting: {
            sourceWidth: 600,
            sourceHeight: 500
        },

        legend: {
            layout: 'horizontal',
            borderWidth: 0,
            backgroundColor: 'rgba(255,255,255,0.85)',
            floating: true,
            verticalAlign: 'top',
            y: 25
        },

        mapNavigation: {
            enabled: true
        },

        colorAxis: {
            min: 100000,
            max: 5000000,
            type: 'logarithmic',
            minColor: '#EEEEFF',
            maxColor: '#000022',
            stops: [
                [0, '#EFEFFF'],
                [0.6, '#4444FF'],
                [1, '#000022']
            ]
        },

        series: [{
            animation: {
                duration: 1000
            },
            data: data,
            joinBy: ['code', 'code'],
            dataLabels: {
                enabled: true,
                color: '#FFFFFF',
                format: '{point.code}'
            },
            name: 'Nombre de nuitées',
            tooltip: {
                pointFormat: '{point.name}: {point.value} nuitées'
            }
        }]
    });
});


Highcharts.chart('scatter_chart', {
    chart: {
        height: document.getElementsByClassName("top-left")[0].offsetHeight,
        width: document.getElementsByClassName("top-left")[0].offsetWidth,
        type: 'scatter',
        zoomType: 'xy'
    },
    title: {
        text: 'Height Versus Weight of 507 Individuals by Gender'
    },
    subtitle: {
        text: 'Source: Heinz  2003'
    },
    xAxis: {
        title: {
            enabled: true,
            text: 'temperature (°C)'
        },
        // startOnTick: true,
        // endOnTick: true,
        showLastLabel: true
    },
    yAxis: {
        title: {
            text: 'Weight (kg)'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'left',
        verticalAlign: 'top',
        x: 100,
        y: 70,
        floating: true,
        backgroundColor: Highcharts.defaultOptions.chart.backgroundColor,
        borderWidth: 1
    },
    plotOptions: {
        scatter: {
            marker: {
                radius: 5,
                states: {
                    hover: {
                        enabled: true,
                        lineColor: 'rgb(100,100,100)'
                    }
                }
            },
            states: {
                hover: {
                    marker: {
                        enabled: false
                    }
                }
            },
            tooltip: {
                headerFormat: '<b>{series.name}</b><br>',
                pointFormat: '{point.x} °C, {point.y} °%'
            }
        }
    },
    series: [{
        type: 'line',
        name: 'Regression Line',
        data: [[-7, 0.39815211442], [36, 2.47511788604]],
        marker: {
            enabled: false
        },
        states: {
            hover: {
                lineWidth: 0
            }
        },
        enableMouseTracking: false
    },{
        name: 'Female',
        color: 'rgba(223, 83, 83, .5)',
        data: [
            [2.0, 0.08913181990068114],
            [3.0, 0.0731020623140232],
            [4.0, 0.14594421773568064],
            [5.0, 0.2027078830283616],
            [6.0, 0.1875748042203655],
            [7.0, 0.6426035471935567],
            [8.0, 0.5821167156677364],
            [9.0, 0.6779508845552994],
            [10.0, 0.9292581076199026],
            [11.0, 1.8249849772884679],
            [12.0, 1.9158061919895268],
            [13.0, 1.6873350382554098],
            [14.0, 1.7096837821627098],
            [15.0, 1.7474060187534448],
            [16.0, 1.474731200300222],
            [17.0, 1.007814965837452],
            [18.0, 1.2255422184083995],
            [19.0, 0.8041974086858104],
            [20.0, 2.0118222957017458],
            [21.0, 1.6216078340122648],
            [22.0, 2.93939750619358],
            [23.0, 1.3389168536944966],
            [24.0, 1.302916500265685],
            [25.0, 1.9593535918054092],
            [26.0, 2.8551681800501476],
            [27.0, 3.478541866044793],
            [28.0, 2.9809956043167194],
            [29.0, 3.5246753394397143],
            [30.0, 3.3083743259406244],
            [31.0, 3.0178374063095648],
            [32.0, 1.412502992595551],
            [33.0, 1.3162497238440485],
            [34.0, 0.9900828181057983],
            [35.0, 0.3941455534365131],
            [36.0, 1.0905075924797716],
            [-1.0, 0.09313490754030493],
            [0.0, 0.09270039783652938],
            [1.0, 0.09968251928340552],
            [2.0, 0.35499442798462755],
            [3.0, 0.4590370273990223],
            [4.0, 0.21918017936829967],
            [5.0, 0.9018698394658632],
            [6.0, 1.9280394203980016],
            [7.0, 1.3423802720814897],
            [8.0, 1.4721713172178943],
            [9.0, 1.5485251603365229],
            [10.0, 2.5438370607539804],
            [11.0, 1.4797602539407329],
            [12.0, 1.613199682279529],
            [13.0, 0.978785548580753],
            [14.0, 1.643720243196453],
            [15.0, 1.1586875490370658],
            [16.0, 0.8513018998023287],
            [17.0, 1.332221734869082],
            [18.0, 1.8831275984301663],
            [19.0, 1.9393366726961665],
            [20.0, 0.9061025633043664],
            [21.0, 3.1595073448174733],
            [22.0, 3.5606272253218605],
            [23.0, 2.3135244431130864],
            [24.0, 3.3862165285356767],
            [25.0, 1.5264250978169043],
            [26.0, 1.6879653175153917],
            [27.0, 2.9953001345233976],
            [28.0, 2.2696689292182226],
            [29.0, 3.660871610601528],
            [30.0, 1.763225394827964],
            [31.0, 2.5250632449322303],
            [32.0, 2.1207219993826096],
            [33.0, 2.825249517868203],
            [35.0, 0.4588647218268354],
            [36.0, 0.4232199430240064],
            [-3.0, 0.07104758827138354],
            [-1.0, 0.06765041987964565],
            [2.0, 0.16156593668209987],
            [3.0, 0.14261682948037885],
            [4.0, 0.10451817700238653],
            [5.0, 0.3123930180623293],
            [6.0, 0.5334299593510782],
            [7.0, 1.3301147718727977],
            [8.0, 0.9785977834895836],
            [9.0, 1.3278662678313673],
            [10.0, 1.8852280193399755],
            [11.0, 1.9277620066471204],
            [12.0, 1.6786328982944696],
            [13.0, 1.2275958361781054],
            [14.0, 2.1001721571061753],
            [15.0, 1.4746922968773033],
            [16.0, 1.387393806253915],
            [17.0, 0.5030147663975156],
            [18.0, 0.6268803570318193],
            [19.0, 1.5844578398826616],
            [20.0, 1.609420089320893],
            [21.0, 1.5353530813367318],
            [22.0, 2.608783771277673],
            [23.0, 1.8445827754276318],
            [24.0, 2.0386248196246965],
            [25.0, 2.067839953849861],
            [26.0, 3.342083897301203],
            [27.0, 4.225429910157996],
            [28.0, 1.2536502161507457],
            [29.0, 2.566221517062579],
            [30.0, 3.8351744092895714],
            [31.0, 2.4352043987170755],
            [32.0, 1.7435979619189217],
            [33.0, 1.718843859711954],
            [34.0, 0.9829971422540732],
            [35.0, 1.3811622379105228],
            [36.0, 0.3273282243352345],
            [0.0, 0.10992298101051384],
            [2.0, 0.2190218401245569],
            [3.0, 0.211383451065601],
            [4.0, 0.591095707174931],
            [5.0, 0.6905035032471419],
            [6.0, 1.376855873978727],
            [7.0, 0.9825917617900478],
            [8.0, 1.9889476126179109],
            [9.0, 0.9498596240593872],
            [10.0, 1.9092100037552144],
            [11.0, 3.4622200254149926],
            [12.0, 3.3807807574512494],
            [13.0, 2.266737737794964],
            [14.0, 2.133176575258596],
            [15.0, 2.6212398761685045],
            [16.0, 1.2788788450878892],
            [17.0, 1.7954010590800915],
            [18.0, 1.3819246051799376],
            [19.0, 1.692288529852913],
            [20.0, 1.8596444132133083],
            [21.0, 1.846075017265168],
            [22.0, 1.0960763992373923],
            [23.0, 2.664057968683056],
            [24.0, 3.5052365176453613],
            [25.0, 2.1312440857189547],
            [26.0, 2.2904236115601986],
            [27.0, 1.9269381629772115],
            [28.0, 2.1266618153594115],
            [29.0, 3.5536651252004696],
            [30.0, 0.5555554503896292],
            [31.0, 0.9015912624285924],
            [32.0, 0.3826901595361607],
            [33.0, 0.583339041362315],
            [34.0, 0.11898450649254193],
            [0.0, 0.07414949346540993],
            [1.0, 0.06960299983378405],
            [2.0, 0.05013290115178313],
            [3.0, 0.055599105327211185],
            [4.0, 0.4452613744041548],
            [5.0, 0.5310981329875039],
            [6.0, 0.5999375995396408],
            [7.0, 0.7905345949707969],
            [8.0, 0.4955678058472214],
            [9.0, 0.9869622081890762],
            [10.0, 1.5194485835068474],
            [11.0, 2.4645899914966165],
            [12.0, 2.2094744337662813],
            [13.0, 1.4303668084764984],
            [14.0, 1.598127217574755],
            [15.0, 1.359297477681369],
            [16.0, 1.0135123427554409],
            [17.0, 1.6455964287553375],
            [18.0, 1.249261919978546],
            [19.0, 1.6154975997322265],
            [20.0, 2.1984986428426043],
            [21.0, 1.7995872092402538],
            [22.0, 1.5798631544171742],
            [23.0, 2.8508944494372264],
            [24.0, 2.5521967590510566],
            [25.0, 2.437822944066148],
            [26.0, 1.5975979501863404],
            [27.0, 3.596458669421922],
            [28.0, 3.4486021847338746],
            [29.0, 3.600380454004928],
            [30.0, 0.7574423684230467],
            [31.0, 0.6816269841613157],
            [32.0, 0.6545128761482797],
            [33.0, 1.2037796306331587],
            [34.0, 0.2628463322070125],
            [1.0, 0.04478294898932551],
            [4.0, 0.1108903438603764],
            [5.0, 0.09420261533375412],
            [7.0, 0.5094168916619316],
            [8.0, 0.3151831275851433],
            [9.0, 0.7265846676317562],
            [10.0, 0.7188002350665558],
            [11.0, 1.1306187571475874],
            [12.0, 1.5344339886895526],
            [13.0, 1.729695233359439],
            [14.0, 1.0833600253240698],
            [15.0, 1.1473686874141509],
            [16.0, 1.0381600943003255],
            [17.0, 0.7236442915547954],
            [18.0, 0.8987084008890465],
            [19.0, 1.8110343752888651],
            [20.0, 1.6264725978115344],
            [21.0, 1.6963405102195082],
            [22.0, 1.0827472229972444],
            [23.0, 0.9216938636040094],
            [24.0, 2.2140248578345765],
            [25.0, 2.2798258515422147],
            [26.0, 3.40798034469634],
            [27.0, 4.117241443793189],
            [28.0, 3.5386715757712466],
            [29.0, 1.7535960599510636],
            [30.0, 0.6941468442139175],
            [31.0, 0.4928044195614106],
            [32.0, 0.7738656692140182],
            [0.0, 0.07412246565954722],
            [2.0, 0.09125743397708336],
            [3.0, 0.25645429779766804],
            [4.0, 0.24818952671928365],
            [5.0, 0.7815066158037475],
            [6.0, 0.5181603155480401],
            [7.0, 1.202911383054246],
            [8.0, 1.3229054401505496],
            [9.0, 1.1118299450541298],
            [10.0, 1.5706232976515608],
            [11.0, 1.7338138073347182],
            [12.0, 1.7324621582316095],
            [13.0, 1.2664459307394405],
            [14.0, 0.8009788106954093],
            [15.0, 1.4799360906398515],
            [16.0, 2.5769190150770203],
            [17.0, 0.5163933159392885],
            [18.0, 1.683894308427714],
            [19.0, 1.3812657061129057],
            [20.0, 0.8642880835300858],
            [21.0, 2.538235099339608],
            [22.0, 2.251389816239227],
            [23.0, 2.981766080814435],
            [24.0, 2.8759995384961683],
            [25.0, 2.4344397119633743],
            [26.0, 3.4397568917568955],
            [27.0, 1.558718929769493],
            [28.0, 2.91527480071619],
            [29.0, 2.994360352926215],
            [30.0, 2.775203122567457],
            [31.0, 3.804533193458396],
            [32.0, 0.6311426929219668],
            [33.0, 1.3237361411618354],
            [34.0, 0.8767415588602918],
            [35.0, 0.855326368382911],
            [-7.0, 0.061491789792022813],
            [-5.0, 0.07688266696646659],
            [-4.0, 0.06707152065955183],
            [-2.0, 0.0443509713172229],
            [-1.0, 0.12658386865281113],
            [0.0, 0.2589195935469568],
            [1.0, 0.3458859386621969],
            [2.0, 0.40426512794456987],
            [3.0, 1.245068891422245],
            [4.0, 0.8018317100918748],
            [5.0, 1.2660968745888197],
            [6.0, 1.8304816315159769],
            [7.0, 1.5355591472813648],
            [8.0, 1.247995022776939],
            [9.0, 1.6974143737831575],
            [10.0, 0.7352191904291377],
            [11.0, 0.9176147115383896],
            [12.0, 0.6072583187858824],
            [13.0, 0.8331872156867808],
            [14.0, 0.7676648233914787],
            [15.0, 1.1578730458085975],
            [16.0, 1.957065500168788],
            [17.0, 1.1550903522654083],
            [18.0, 2.526570986966659],
            [19.0, 2.8733605838413347],
            [20.0, 2.8555169200901624],
            [21.0, 2.9547471980890463],
            [22.0, 2.5455478094287183],
            [23.0, 2.978428780768456],
            [24.0, 1.5626832374368849],
            [25.0, 3.964951016953656],
            [26.0, 2.8858827047856868],
            [27.0, 1.6880909160353583],
            [28.0, 1.6219660849317368],
            [29.0, 1.4677847813454403],
            [30.0, 0.6577914597789537],
            [31.0, 0.7553865467266847],
            [-2.0, 0.14682906257021394],
            [-1.0, 0.1656562765029416],
            [0.0, 0.4377125447141252],
            [1.0, 0.2189899597014402],
            [2.0, 1.1334366192716114],
            [3.0, 0.6069809019179867],
            [4.0, 0.9567523980588779],
            [5.0, 1.3503632535447327],
            [6.0, 1.232879824266769],
            [7.0, 1.553986735850919],
            [8.0, 1.9394956337869451],
            [9.0, 2.3568675229338787],
            [10.0, 1.3281812439889442],
            [11.0, 0.8426439436257679],
            [12.0, 1.97528852844201],
            [13.0, 1.70807527346111],
            [14.0, 2.553937802962837],
            [15.0, 2.0886553964742327],
            [16.0, 2.668036167785051],
            [17.0, 1.8197824005008711],
            [18.0, 1.940802238398032],
            [19.0, 2.4466095670521244],
            [20.0, 3.279254706279536],
            [21.0, 1.543135359331815],
            [22.0, 2.7460591288471004],
            [23.0, 2.128151178328286],
            [24.0, 3.2013528205482435],
            [25.0, 4.01705750308056],
            [26.0, 2.9700989388022],
            [27.0, 1.7295812790868383],
            [28.0, 1.4310650062997825],
            [29.0, 0.35313133656940066],
            [30.0, 0.22762162182333115],
            [32.0, 0.2075786097775844],
            [2.0, 0.17586803342856633],
            [3.0, 0.057147399231433325],
            [4.0, 0.051327832981183576],
            [5.0, 0.27801068794568856],
            [6.0, 0.4393468567070707],
            [7.0, 0.7265443045219433],
            [8.0, 0.3818184056217994],
            [9.0, 0.4156593687035065],
            [10.0, 0.7611992655326661],
            [11.0, 1.6911881927031491],
            [12.0, 1.6634574035111946],
            [13.0, 1.7162293785376632],
            [14.0, 1.1872463746563635],
            [15.0, 1.4270807080004138],
            [16.0, 0.9720054541512668],
            [17.0, 1.1146107743930551],
            [18.0, 0.7242965433919105],
            [19.0, 1.5157575534258754],
            [20.0, 1.6782739450497286],
            [21.0, 2.1277713114508656],
            [22.0, 1.8488309755971752],
            [23.0, 1.3939351274846603],
            [24.0, 1.4041212217876449],
            [25.0, 3.162909792592103],
            [26.0, 3.1986530495589234],
            [27.0, 3.607988736719165],
            [28.0, 2.1649097816257075],
            [29.0, 4.0866269324406606],
            [30.0, 2.1163872019809498],
            [31.0, 1.971569705218048],
            [32.0, 1.290262334784033],
            [33.0, 0.3336709470627268],
            [34.0, 1.4625985957774157],
            [-1.0, 0.11361202624754987],
            [0.0, 0.0869674830798035],
            [1.0, 0.28751832180833936],
            [2.0, 0.4314447278722779],
            [3.0, 0.32306030747578873],
            [4.0, 0.5726569839148248],
            [5.0, 2.079621885228641],
            [6.0, 1.2506306341526645],
            [7.0, 1.6226507675425006],
            [8.0, 1.3096538402516609],
            [9.0, 1.8199522717383845],
            [10.0, 3.0431260290901387],
            [11.0, 2.5145070849590216],
            [12.0, 2.52395882570253],
            [13.0, 2.0912239208834644],
            [14.0, 1.2389808141664795],
            [15.0, 2.079144041915016],
            [16.0, 1.7726266699569353],
            [17.0, 0.9519594494043104],
            [18.0, 1.7710211164231544],
            [19.0, 1.9408753006844013],
            [20.0, 1.624676823192272],
            [21.0, 3.0584265719924213],
            [22.0, 3.1862783289860044],
            [23.0, 1.664653194810164],
            [24.0, 4.357262039623605],
            [25.0, 1.1468048389681604],
            [26.0, 1.847791423190194],
            [27.0, 3.2434283892955897],
            [28.0, 1.342405220967538],
            [29.0, 2.5516641810265246],
            [30.0, 2.6016179210329127],
            [31.0, 2.497247384470876],
            [32.0, 1.3661827042535328],
            [33.0, 0.2526166461811479],
            [0.0, 0.09805184562865284],
            [2.0, 0.08176232589966352],
            [3.0, 0.3411261953550875],
            [5.0, 0.8485809762333445],
            [6.0, 1.1726451395069557],
            [7.0, 0.9509913174803509],
            [8.0, 1.4711400976321942],
            [9.0, 1.6052234453311756],
            [10.0, 1.3603084180241232],
            [11.0, 2.6579002776537304],
            [12.0, 2.470818767698312],
            [13.0, 2.414091564332956],
            [14.0, 1.1868174031587575],
            [15.0, 2.490274634353545],
            [16.0, 2.0415117178852413],
            [17.0, 1.7536030401459388],
            [18.0, 0.8407318692444931],
            [19.0, 1.163079338401466],
            [20.0, 2.567573555549949],
            [21.0, 1.594627627755703],
            [22.0, 2.415779646880984],
            [23.0, 3.3195332645851727],
            [24.0, 2.427653447854398],
            [25.0, 4.126551168816799],
            [26.0, 2.026767222861227],
            [27.0, 1.8696992483783663],
            [28.0, 2.583395752991632],
            [29.0, 3.1334245479625165],
            [30.0, 3.3809432280131366],
            [31.0, 0.6205086256484205],
            [32.0, 1.358505889201653],
            [33.0, 0.9311825748122532],
            [34.0, 0.20130145955490472],
            [-1.0, 0.2479875791434272],
            [0.0, 0.08611387641249378],
            [1.0, 0.3706078722740928],
            [2.0, 0.5838789305139265],
            [3.0, 0.8524876010211423],
            [4.0, 0.5556880714343169],
            [5.0, 0.8917037211252731],
            [6.0, 1.6750814559724163],
            [7.0, 0.6695950523009584],
            [8.0, 1.6811223543466185],
            [9.0, 1.5408516997110824],
            [10.0, 2.026932711689573],
            [11.0, 1.3214651641047723],
            [12.0, 1.4514439178064826],
            [13.0, 2.3509535734564446],
            [14.0, 1.4514563476385285],
            [15.0, 2.391586694413784],
            [16.0, 2.072115151175632],
            [17.0, 1.8227478606751335],
            [18.0, 2.0977454648538307],
            [19.0, 1.9477795412226615],
            [20.0, 1.8341335868289796],
            [21.0, 1.1859054158145506],
            [22.0, 4.138699027090933],
            [23.0, 2.7458866270439395],
            [24.0, 1.2267249842525745],
            [25.0, 2.7301256000100134],
            [26.0, 4.062131261689524],
            [27.0, 2.3532779520489875],
            [28.0, 3.2540803102317013],
            [29.0, 0.7845958583876201],
            [30.0, 3.2488349211084224],
            [31.0, 1.5061973279677174],
            [32.0, 0.9554438998555368]
            ]                     
    }]
});



/**  heat map                           */
function getPointCategoryName(point, dimension) {
    var series = point.series,
        isY = dimension === 'y',
        axis = series[isY ? 'yAxis' : 'xAxis'];
    return axis.categories[point[isY ? 'y' : 'x']];
}

Highcharts.chart('heat_map', {

    chart: {
        height: document.getElementsByClassName("bot-left")[0].offsetHeight,
        type: 'heatmap',
        marginTop: 40,
        marginBottom: 80,
        plotBorderWidth: 1
    },


    title: {
        text: 'Sales per employee per weekday'
    },

    xAxis: {
        categories: [ 'Hérault (34)', 'Haute-Garonne (31)', 'Pyrénées-Orientales (66)', 'Gard (30)', 'Aude (11)', 'Hautes-Pyrénées (65)', 'Tarn-et-Garonne (82)', 'Lot (46)', 'Gers (32)', 'Tarn (81)', 'Aveyron (12)', 'Ariège (9)', 'Lozère (48)']
    },

    yAxis: {
        categories: [0,1,2,3,4],
        title: null,
        reversed: true
    },

    // accessibility: {
    //     point: {
    //         descriptionFormatter: function (point) {
    //             var ix = point.index + 1,
    //                 xName = getPointCategoryName(point, 'x'),
    //                 yName = getPointCategoryName(point, 'y'),
    //                 val = point.value;
    //             return ix + '. ' + xName + ' sales ' + yName + ', ' + val + '.';
    //         }
    //     }
    // },

    colorAxis: {
        min: -1.5,
        minColor: '#FFFFFF',
        maxColor: Highcharts.getOptions().colors[8]
    },

    legend: {
        align: 'right',
        layout: 'vertical',
        margin: 0,
        verticalAlign: 'top'
        //y: 25,
        //symbolHeight: 280
    },

    tooltip: {
        formatter: function () {
            return '<b>' + getPointCategoryName(this.point, 'x') + '</b> sold <br><b>' +
                this.point.value + '</b> items on <br><b>' + getPointCategoryName(this.point, 'y') + '</b>';
        }
    },

    series: [{
        name: 'Sales per employee',
        borderWidth: 1,
        data: [
            [4, 0, -1.1968281589671304],
            [4, 1, -0.527782688345578],
            [4, 2, -0.29503405821225154],
            [4, 3, 0.2474183853302512],
            [4, 4, 1.7722265201947085],
            [10, 0, -0.39050625313015297],
            [10, 1, -1.0013852262240994],
            [10, 2, -0.8892304103202606],
            [10, 3, 0.6650384771493956],
            [10, 4, 1.6160834125251182],
            [3, 0, -0.7523927356561826],
            [3, 1, -0.8893590385980524],
            [3, 2, -0.6911757854275521],
            [3, 3, 0.6953235639428276],
            [3, 4, 1.637603995738959],
            [1, 0, -0.8771414838078453],
            [1, 1, 0.10577447792868476],
            [1, 2, -0.6249284223773344],
            [1, 3, 1.8927352125188568],
            [1, 4, -0.4964397842623611],
            [8, 0, -1.339456292089006],
            [8, 1, -0.458306548701848],
            [8, 2, -0.4134345260455343],
            [8, 3, 1.541595784395704],
            [8, 4, 0.6696015824406856],
            [0, 0, -1.3913308086969451],
            [0, 1, -0.4807243278746268],
            [0, 2, -0.189684690605214],
            [0, 3, 0.451328343885789],
            [0, 4, 1.6104114832909968],
            [7, 0, -0.9523540923408146],
            [7, 1, -0.5660168598333913],
            [7, 2, -0.6355543240513899],
            [7, 3, 0.3527319253617172],
            [7, 4, 1.8011933508638789],
            [12, 0, 0.10426729575721268],
            [12, 1, -1.3959347139292182],
            [12, 2, -0.6474406442348394],
            [12, 3, 1.5783418344772695],
            [12, 4, 0.3607662279295759],
            [5, 0, 0.4783784672139737],
            [5, 1, -1.920212646347765],
            [5, 2, -0.012575742995522115],
            [5, 3, 0.612913284188923],
            [5, 4, 0.8414966379403904],
            [2, 0, -1.129225876568249],
            [2, 1, -0.7877967940083979],
            [2, 2, -0.31966903382136536],
            [2, 3, 0.6180249803612258],
            [2, 4, 1.618666724036786],
            [9, 0, -0.9189724128210304],
            [9, 1, -0.15960650471622898],
            [9, 2, -0.8464553969276767],
            [9, 3, 0.0791570457251535],
            [9, 4, 1.8458772687397815],
            [6, 0, -1.4699347423588671],
            [6, 1, -0.15378625297517545],
            [6, 2, -0.3079671414779999],
            [6, 3, 0.3119754453547605],
            [6, 4, 1.6197126914572824],
            [11, 0, -0.15468073238506622],
            [11, 1, -1.5685177111321251],
            [11, 2, 0.19806991628987805],
            [11, 3, -0.047863357112987434],
            [11, 4, 1.5729918843403017]
            ],
            
        dataLabels: {
            enabled: false,
            color: '#000000'
        }
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                yAxis: {
                    labels: {
                        formatter: function () {
                            return this.value.charAt(0);
                        }
                    }
                }
            }
        }]
    }

});
